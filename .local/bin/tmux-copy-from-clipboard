#!/usr/bin/env bash

buf="$(pbpaste 2> /dev/null || xsel -ob)"

if [[ -z "$buf" ]]; then
    exit 0
fi

if [[ -z "$(tmux lsb)" || "$buf" != "$(tmux saveb -)" ]]; then
    # Use loadb instead of setb to handle big content
    echo "$buf" | tmux loadb -
fi
