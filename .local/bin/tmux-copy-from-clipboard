#!/usr/bin/env bash

buf="$(clipboard paste)"

if [[ -z "$buf" ]]; then
    exit 0
fi

if [[ -z "$(tmux lsb)" || "$buf" != "$(tmux saveb -)" ]]; then
    # Use loadb instead of setb to handle big content
    echo -n "$buf" | tmux loadb -
fi
